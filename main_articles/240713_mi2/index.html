<!DOCTYPE html>
<!-- _layouts/distill.html -->
<html>
    
<head>    <!-- Metadata, OpenGraph and Schema.org -->
    

    <!-- Standard metadata -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Bumjini | Review on dictionary learning for mechanistic interpretability in ICML 2024</title>
    <meta name="author" content="Bumjini  " />
    <meta name="description" content="Literature reviews on ICML 2024 mechanistic interpretability workshop oral and spotlight papers." />
    <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website" />


    <!-- Bootstrap & MDB -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous" />

    <!-- Fonts & Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons">

    <!-- Code Syntax Highlighting -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/github.css" media="none" id="highlight_theme_light" />

    <!-- Styles -->
    
    <link rel="shortcut icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ü™¥</text></svg>">
    
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="canonical" href="https://fxnnxc.github.io/main_articles/240713_mi2/">
    
    <!-- Dark Mode -->
    

  <!-- jQuery -->
<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
  <!-- MathJax -->
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        tags: 'ams',
        inlineMath: [['$','$'], ['\\(','\\)']]
      },
      chtml: {
          scale: 1.0,
          minScale: .6,  
          mtextFontInherit: true,
          mtextInheritFont: true,
          merrorInheritFont: true,
        },
        svg: {
          scale: 1.2
        }
    };
  </script>
  <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script>
  <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>

  <!-- Distill js -->
  <script src="/assets/js/distillpub/template.v2.js"></script>
  <script src="/assets/js/distillpub/transforms.v2.js"></script>
  <script src="/assets/js/distillpub/overrides.js"></script>
  <!-- Page/Post style -->
  
  <!-- Page/Post style -->
  <style type="text/css">
    .table {
    padding-top:200px;
    margin-bottom: 2.5rem;
    border-bottom: 2px;
} .p {
    font-size:20px;
} .center{
    display: block;
    margin-left: auto;
    margin-right: auto;
    width: 50%;
}

  </style>
</head>

  <d-front-matter>
    <script async type="text/json">{
      "title": "Review on dictionary learning for mechanistic interpretability in ICML 2024",
      "description": "Literature reviews on ICML 2024 mechanistic interpretability workshop oral and spotlight papers.",
      "published": "July 14, 2024",
      "authors": [
        {
          "author": "Bumjin Park",
          "authorURL": "",
          "affiliations": [
            {
              "name": "KAIST",
              "url": ""
            }
          ]
        }
        
      ],
      "katex": {
        "delimiters": [
          {
            "left": "$",
            "right": "$",
            "display": false
          },
          {
            "left": "$$",
            "right": "$$",
            "display": true
          }
        ]
      }
    }</script>
  </d-front-matter>

  <body style="padding-top:0px" class="sticky-bottom-footer"> 
    
    <!-- Header --><header>
      
      <!-- Nav Bar -->
      <nav id="navbar" class="navbar navbar-light navbar-expand-sm sticky-top">
        <div class="container">
          <img>
          <!-- <img src="/assets/common/KAIST-hi.gif" width="40px" style="margin-right:0px; padding-bottom: 3px;"> -->
          
          <a class="navbar-brand title font-weight-lighter" href="https://fxnnxc.github.io/" style="margin-left:20px ;">
              <!--Bumjini-->
           <span class="font-weight-bold" style="font-size:larger;font-family:Times New Roman;">Bumjini    </span>
        </a>
          <!-- Navbar Toggle -->
          <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar top-bar"></span>
            <span class="icon-bar middle-bar"></span>
            <span class="icon-bar bottom-bar"></span>
          </button>

          <div class="collapse navbar-collapse text-right" id="navbarNav">
            <ul class="navbar-nav ml-auto flex-nowrap">

              <!-- About -->
              <!-- <li style="font-size: 17px" class="nav-item ">
                <a class="nav-link" href="/">  About Me</a>
              </li> -->
              
              <!-- Blog -->
              <li style="font-size: 17px" class="nav-item ">
                <a class="nav-link" href="/main_papers/"> Papers</a>
              </li>

              <li style="font-size: 17px" class="nav-item ">
                <a class="nav-link" href="/main_articles/"> Articles</a>
              </li>

              <li style="font-size: 17px" class="nav-item ">
                <a class="nav-link" href="/main_projects/"> Projects</a>
              </li>

              <!-- Other pages -->
              <li style="font-size: 17px" class="nav-item dropdown ">
                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Others</a>
                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown">
                  <a class="dropdown-item" href="/side_papers/">üóÇÔ∏è side-paper</a>
                  <a class="dropdown-item" href="/side_articles/">ü•ï side-articles</a>
                  <a class="dropdown-item" href="/book/">üìö book (korean)</a>
                </div>
              </li>
            </ul>
          </div>
        </div>
      </nav>
    </header>

    <!-- Content -->
    <div class="post distill">

      <d-title>
        <h1 style="font-size: 32px;">Review on dictionary learning for mechanistic interpretability in ICML 2024</h1>
        <p>Literature reviews on ICML 2024 mechanistic interpretability workshop oral and spotlight papers.</p>
      </d-title>

      <d-byline></d-byline>

      <d-article>
        

        <h2 id="measuring-progress-in-dictionary-learning-for-language-model-interpretability-with-board-game-models">Measuring Progress in Dictionary Learning for Language Model Interpretability with Board Game Models</h2>

<p>Information in the world is clustered to form patterns, and the patterns are further interpreted for the verification of neural networks. Mostly this interpretation is human-oriented. On the other side, the interpretation can provide the mechanism of neural networks which can provide the reliability and editing. To do so, understanding the representation space of trained model, such as GPT, is crucial.</p>

<p>This work proposes a new metric to evaluate the features learned in sparse autoencoders (SAEs). The coverage of features is the proportion of correlated features with the predefined feature sets. This work leverages known features in chess to measure the coverage. In addition, the authors proposes annealing strategy as an alternative of $L_1$ which anneals the magnitude of regularization term $\lambda$.</p>

<h2 id="1-gpt-for-board-games">1. GPT for board games</h2>

<p>This work explores the features of GPT trained on board games, chess and Othello. 
There are several ways to encode the board information into GPT models such as encoding of full board state at every time step. 
Another way is to provide the executed actions of games.</p>

<p>The previous work (Emergence of world map in Othello) showed that the board state information is encoded in the hidden representation of the GPT by training a prober. In the same way, the authors in this work use the action information, Portable Game Notation (PGN) (e4 e5, ‚Ä¶).</p>

<h2 id="2-verification-of-features">2. Verification of Features</h2>

<h3 id="notations">Notations</h3>

<ul>
  <li>dictionary and feature magnitude: $x \approx \sum_{i}^{n_{features}} f_i(x) d_i + b $</li>
  <li>board state property (BSP) features $f: { \text{game board} } \rightarrow { 0, 1} $ is a function which determines whether the board state includes the desired feature in the board</li>
  <li>$\mathcal{F}_{board state}$ : (8x8x12) (number of boards x ) with values 0, 1</li>
  <li>$\mathcal{F}_{strategy}$ : whether a specific strategy can be actionable.</li>
</ul>

<p>Predictor $\phi$ of the feature $f_i$ for input $x$</p>

\[\phi_{f_i, t} (x) = \mathbb{I}[f_i(x) &gt; t \cdot f_i^{max}]\]

<p>where $f_i^{max}$ is the maximum value of the feature over the dataset and $t$ controls the threshold.</p>

<h3 id="coverage">Coverage</h3>

<p>For all features $g\in \mathcal{F}$, the coverage measures the similarity between $g$ and $\phi$. If there is a feature $f_i$ in SAE which correlates to the feature $g$, then the feature $g$ is covered.</p>

\[\mathrm{Cov}(\{ f_i \}, \mathcal{F}) = \frac{1}{|\mathcal{F}|} \sum_{g\in \mathcal{F}} F_1(\phi_{f_i, t}; g)\]

<h3 id="fidelity">Fidelity</h3>

<p>Fidelity measures the prediction accuracy of the board state (8x8 board + chess piece). Consider a board state $\mathbf{b}$ and features $f_i$ in SAE. For each feature $f_i$, the prediction rule is</p>

\[\mathcal{P}_g{(\{f_i(x)\})} = 
\begin{cases}
1 &amp;  \text{if } \phi_{f_i, t}(x) = 1 \text{ for any } f_i \text{ which is high precision for  } g \text{ on } \mathcal{D}_{train} \\
0 &amp; otherwise
\end{cases}\]

<p>This predicts the board states. Finally, the reconstruction is the average $F_1$-score over all board states in the test dataset $\mathcal{D}_{test}$.</p>

\[\operatorname{Rec}_t({x_i}, \mathcal{D}_{test}) = \frac{1}{|\mathcal{D}_{test}|} \sum_{x \in \mathcal{D}_{test}} F_1 (\mathbf{\mathcal{P}(\{ f_i(x) \})}; \mathbf{b})_{g \in \mathcal{F}}\]

<h2 id="3-progress-of-dictionary-learning">3. Progress of Dictionary Learning</h2>

<p>There are two novel findings in this work.</p>

<ol>
  <li>The proposed Coverage metric can provide a descent evaluation of features for the selected feature sets.</li>
  <li>The proposed annealing strategy provides a better evaluation results on both fidelity and coverage.</li>
</ol>

<h2 id="31-coverage-and-reconstruction-comparison">3.1 Coverage and Reconstruction Comparison</h2>

<table>
  <thead>
    <tr>
      <th>Model</th>
      <th>Chess <br> Coverage</th>
      <th>Chess<br> Reconstruction</th>
      <th>Othello<br> Coverage</th>
      <th>Othello <br>Reconstruction</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>SAE: random GPT</td>
      <td>0.11</td>
      <td>0.01</td>
      <td>0.27</td>
      <td>0.08</td>
    </tr>
    <tr>
      <td>SAE: trained GPT</td>
      <td>0.41</td>
      <td>0.67</td>
      <td>0.52</td>
      <td>0.95</td>
    </tr>
    <tr>
      <td>Linear probe</td>
      <td>0.98</td>
      <td>0.98</td>
      <td>0.99</td>
      <td>0.99</td>
    </tr>
  </tbody>
</table>

<h2 id="32-sparsity-and-metrics">3.2 Sparsity and Metrics</h2>

<p><img src="https://onedrive.live.com/embed?resid=AE042A624064F8CA%2112543&amp;authkey=%21AAaQULD3PJ9AlUc&amp;width=1024"></p>

<p>It is interesting that the increasing $L_0$ increases the coverage at the early phase but decreases the coverage after $L_0=150$. There are two possibilities for this phenomena</p>

<ol>
  <li>The metric has pitfalls (the coverage uses the implicit predictor and the threshold might be heuristic)</li>
  <li>increased $L_0$ reduces the number of highly correlated features.</li>
</ol>

      </d-article>

      <d-appendix>
        <d-footnote-list></d-footnote-list>
        <d-citation-list></d-citation-list>
      </d-appendix>

<!--
    </div>
 -->
      <hr>
<div id="giscus_thread" style="max-width: 1000px; margin: 0 auto;">
    <script>
      let giscusTheme = localStorage.getItem("theme");
      let giscusAttributes = {
          "src": "https://giscus.app/client.js",
          "data-repo": "fxnnxc/fxnnxc",
          "data-repo-id": "MDEwOlJlcG9zaXRvcnkzMjQ2NjUxMTU=",
          "data-category": "Q&A",
          "data-category-id": "DIC_kwDOE1n_G84CYOk_",
          "data-mapping": "title",
          "data-strict": "0",
          "data-reactions-enabled": "1",
          "data-emit-metadata": "0",
          "data-input-position": "top",
          "data-theme": giscusTheme,
          "data-lang": "en",
          "crossorigin": "anonymous",
          "async": "",
      };
  
  
      let giscusScript = document.createElement("script");
      Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value));
      document.getElementById("giscus_thread").appendChild(giscusScript);
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://giscus.app/?ref_noscript" target="_blank" rel="noopener noreferrer">comments powered by giscus.</a>
</noscript>
  </div>
<!-- Footer -->    <footer class="sticky-bottom mt-5" style="border: none;border-top:0px">
      <div class="container" style="text-align: center; ">
        ¬© Copyright 2024 Bumjini  . Powered by Jekyll with al-folio theme. Hosted by GitHub Pages.

      </div>
    </footer>
    
    <!-- Bootsrap & MDB scripts -->
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.2/dist/umd/popper.min.js" integrity="sha256-l/1pMF/+J4TThfgARS6KwWrk/egwuVvhRzfLAMQ6Ds4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js" integrity="sha256-SyTu6CwrfOhaznYZPoolVw2rxoY7lKYKQvqbtqN93HI=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script>

    
    

<!-- Scrolling Progress Bar -->
<script type="text/javascript">
  /*
   * This JavaScript code has been adapted from the article 
   * https://css-tricks.com/reading-position-indicator/ authored by Pankaj Parashar, 
   * published on the website https://css-tricks.com on the 7th of May, 2014.
   * Couple of changes were made to the original code to make it compatible 
   * with the `al-foio` theme.
   */
  const progressBar = $("#progress");
  /*
   * We set up the bar after all elements are done loading.
   * In some cases, if the images in the page are larger than the intended
   * size they'll have on the page, they'll be resized via CSS to accomodate
   * the desired size. This mistake, however, breaks the computations as the
   * scroll size is computed as soon as the elements finish loading.
   * To account for this, a minimal delay was introduced before computing the
   * values.
   */
  window.onload = function () {
    setTimeout(progressBarSetup, 50);
  };
  /*
   * We set up the bar according to the browser.
   * If the browser supports the progress element we use that.
   * Otherwise, we resize the bar thru CSS styling
   */
  function progressBarSetup() {
    if ("max" in document.createElement("progress")) {
      initializeProgressElement();
      $(document).on("scroll", function() {
        progressBar.attr({ value: getCurrentScrollPosition() });
      });
      $(window).on("resize", initializeProgressElement);
    } else {
      resizeProgressBar();
      $(document).on("scroll", resizeProgressBar);
      $(window).on("resize", resizeProgressBar);
    }
  }
  /*
   * The vertical scroll position is the same as the number of pixels that
   * are hidden from view above the scrollable area. Thus, a value > 0 is
   * how much the user has scrolled from the top
   */
  function getCurrentScrollPosition() {
    return $(window).scrollTop();
  }

  function initializeProgressElement() {
    let navbarHeight = $("#navbar").outerHeight(true);
    $("body").css({ "padding-top": 0 });
    $("progress-container").css({ "padding-top": 0 });
    progressBar.css({ top: navbarHeight });
    progressBar.attr({
      max: getDistanceToScroll(),
      value: getCurrentScrollPosition(),
    });
  }
  /*
   * The offset between the html document height and the browser viewport
   * height will be greater than zero if vertical scroll is possible.
   * This is the distance the user can scroll
   */
  function getDistanceToScroll() {
    return $(document).height() - $(window).height();
  }

  function resizeProgressBar() {
    progressBar.css({ width: getWidthPercentage() + "%" });
  }
  // The scroll ratio equals the percentage to resize the bar
  function getWidthPercentage() {
    return (getCurrentScrollPosition() / getDistanceToScroll()) * 100;
  }
</script>
  </div></body>
  
  <d-bibliography src="/assets/bibliography/all.bib">
  </d-bibliography>
  <script src="/assets/js/distillpub/overrides.js"></script>

  <center>
    <a  href="">
    <img src="/assets/common/KAIST-hi.gif" width="40px" style="margin-right:0px; padding-bottom: 3px;">
    </a>
  </center>
  <hr> 

  </html>
