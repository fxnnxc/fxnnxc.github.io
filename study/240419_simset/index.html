<!DOCTYPE html>
<!-- _layouts/distill.html -->
<html>
    
<head>    <!-- Metadata, OpenGraph and Schema.org -->
    

    <!-- Standard metadata -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Bumjini | Simset Early Experiments and main experiments design</title>
    <meta name="author" content="Bumjini  " />
    <meta name="description" content="심셋을 위한 실험을 모두 설계하다." />
    <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website" />


    <!-- Bootstrap & MDB -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous" />

    <!-- Fonts & Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons">

    <!-- Code Syntax Highlighting -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/github.css" media="none" id="highlight_theme_light" />

    <!-- Styles -->
    
    <link rel="shortcut icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>🪴</text></svg>">
    
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="canonical" href="https://fxnnxc.github.io/study/240419_simset/">
    
    <!-- Dark Mode -->
    

  <!-- jQuery -->
<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
  <!-- MathJax -->
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        tags: 'ams',
        inlineMath: [['$','$'], ['\\(','\\)']]
      },
      chtml: {
          scale: 1.0,
          minScale: .6,  
          mtextFontInherit: true,
          mtextInheritFont: true,
          merrorInheritFont: true,
        },
        svg: {
          scale: 1.2
        }
    };
  </script>
  <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script>
  <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>

  <!-- Distill js -->
  <script src="/assets/js/distillpub/template.v2.js"></script>
  <script src="/assets/js/distillpub/transforms.v2.js"></script>
  <script src="/assets/js/distillpub/overrides.js"></script>
  <!-- Page/Post style -->
  
</head>

  <d-front-matter>
    <script async type="text/json">{
      "title": "Simset Early Experiments and main experiments design",
      "description": "심셋을 위한 실험을 모두 설계하다.",
      "published": "April 18, 2024",
      "authors": [
        {
          "author": "Bumjin Park",
          "authorURL": "",
          "affiliations": [
            {
              "name": "KAIST",
              "url": ""
            }
          ]
        }
        
      ],
      "katex": {
        "delimiters": [
          {
            "left": "$",
            "right": "$",
            "display": false
          },
          {
            "left": "$$",
            "right": "$$",
            "display": true
          }
        ]
      }
    }</script>
  </d-front-matter>

  <body style="padding-top:0px" class="sticky-bottom-footer"> 
    
    <!-- Header --><header>
      
      <!-- Nav Bar -->
      <nav id="navbar" class="navbar navbar-light navbar-expand-sm sticky-top">
        <div class="container">
          <img>
          <!-- <img src="/assets/common/KAIST-hi.gif" width="40px" style="margin-right:0px; padding-bottom: 3px;"> -->
          
          <a class="navbar-brand title font-weight-lighter" href="https://fxnnxc.github.io/" style="margin-left:20px ;">
              <!--Bumjini-->
           <span class="font-weight-bold" style="font-size:larger;font-family:Times New Roman;">Bumjini    </span>
        </a>
          <!-- Navbar Toggle -->
          <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar top-bar"></span>
            <span class="icon-bar middle-bar"></span>
            <span class="icon-bar bottom-bar"></span>
          </button>

          <div class="collapse navbar-collapse text-right" id="navbarNav">
            <ul class="navbar-nav ml-auto flex-nowrap">

              <!-- About -->
              <!-- <li style="font-size: 17px" class="nav-item ">
                <a class="nav-link" href="/">  About Me</a>
              </li> -->
              
              <!-- Blog -->
              <li style="font-size: 17px" class="nav-item ">
                <a class="nav-link" href="/main_papers/"> Papers</a>
              </li>

              <li style="font-size: 17px" class="nav-item ">
                <a class="nav-link" href="/main_articles/"> Articles</a>
              </li>

              <li style="font-size: 17px" class="nav-item ">
                <a class="nav-link" href="/main_projects/"> Projects</a>
              </li>

              <!-- Other pages -->
              <li style="font-size: 17px" class="nav-item dropdown ">
                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Others</a>
                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown">
                  <a class="dropdown-item" href="/side_papers/">🗂️ side-paper</a>
                  <a class="dropdown-item" href="/side_articles/">🥕 side-articles</a>
                  <a class="dropdown-item" href="/book/">📚 book (korean)</a>
                </div>
              </li>
            </ul>
          </div>
        </div>
      </nav>
    </header>

    <!-- Content -->
    <div class="post distill">

      <d-title>
        <h1 style="font-size: 32px;">Simset Early Experiments and main experiments design</h1>
        <p>심셋을 위한 실험을 모두 설계하다.</p>
      </d-title>

      <d-byline></d-byline>

      <d-article>
        

        <h2 id="does-structural-document-memory-help-factual-recall">Does Structural Document Memory Help Factual Recall?</h2>

<ul>
  <li>🗓️ <strong>Experiment Date</strong> : 24.04.21</li>
  <li>🌸 <strong>Scope</strong> : Memorizing Documents for Simset (Counterfact)</li>
  <li>🧑🏻‍💻 <strong>Code</strong>:<a href="https://github.com/fxnnxc/simset/tree/v24.04.22" target="_blank" rel="noopener noreferrer">Simset.24.04.22</a>
</li>
</ul>

<p>현재까지 내가 제대로 하지 못하는 것은 large corpus에 대해서 simsest을 동작하게 만드는 것이다.</p>

<p><img src="https://onedrive.live.com/embed?resid=AE042A624064F8CA%211611&amp;authkey=%21ABrtIca4vP5Un9o&amp;width=1024" width="1024" height="auto"></p>

<p>해당 실험은 inductive location에 대한 초기 실험 결과이다. 나는 이 실험을 통해서 특정 위치를 강제하는 것이 Simset에 대해서 적합한 적용 방법이라는 점을 알게 되었다.</p>

<p><img src="https://onedrive.live.com/embed?resid=AE042A624064F8CA%211612&amp;authkey=%21AKyZ-5pB42xWIc0&amp;width=2401&amp;height=1477" width="2401" height="1477"></p>

<h2 id="visiting-counterfact-dataset">Visiting Counterfact Dataset</h2>
<p>Counterfactual 데이터를 다뤄보며 Factuality Editing에서 실험을 어떻게 하였는지 확인하였습니다.</p>

<ul>
  <li>subject, relation, object에 대해서 관계를 나오도록 모델링 하여 지식을 수정하는 기법은 (s,r) 다음에 나오는 o를 잘 맞추도록 수정한다.</li>
  <li>그러나 MEMIT, FactualGPT, FactualMamba등 논문에서 평가하는 방식은 주어진 (s,r,o) pair를 수정했을 때 제대로 바뀌는 지, paraphrasing을 해도 유지 되는지 수준으로 평가한다. 주어진 subject와 relation에 대해서 강하게 object를 생성하도록 한다.</li>
</ul>

<p>이 과정은 (s,r)이외에 다른 많은 관련된 것들이 포한된 경우나, (s,r) 관계가 문맥에 표현된 경우에 일반화되기 어렵다.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">---------------</span>
Prompt: 2011 Cannes Film Festival can be found <span class="k">in
</span>Target word: Prescott
Generated answers: <span class="o">[</span><span class="s1">'the following programs:\n'</span>, <span class="s1">'the following articles:\n'</span>, <span class="s1">'the following programs:\n'</span>, <span class="s1">'the following articles:\n'</span>, <span class="s1">'the following places:\n'</span><span class="o">]</span>
<span class="nt">---------------</span>
Prompt: Google Patents, a product developed by
Target word: Microsoft
Generated answers: <span class="o">[</span><span class="s1">'Google, allows users to'</span>, <span class="s1">'Google, allows users to'</span>, <span class="s1">'Google, is a pat'</span>, <span class="s1">'Google, allows users to'</span>, <span class="s1">'Google LLC, is'</span><span class="o">]</span>
<span class="nt">---------------</span>
Prompt: Institut Polaire originated <span class="k">in
</span>Target word: Budapest
Generated answers: <span class="o">[</span><span class="s1">'1992'</span>, <span class="s1">'1959'</span>, <span class="s1">'1998'</span>, <span class="s1">'1992'</span>, <span class="s1">'1997'</span><span class="o">]</span>
</code></pre></div></div>

<p>지식의 유무에 대해서 확인하려면, 사람에게 물어도 당연한 Q-A 페어를 말하도록 추가적인 학습이 필요하다.</p>

<h2 id="simset-추가-시험-디자인">Simset 추가 시험 디자인</h2>

<ol>
  <li>메모리 형성에 대해서 : for several configurations</li>
  <li>메모리 활용에 대해서 (inductive loss) : for several model types</li>
</ol>

<h2 id="simset-관련">Simset 관련</h2>

<p>실험의 파이프라인은 다음과 같은 구조이다.</p>

<ol>
  <li>데이터를 선택한다. (Wikipedia)</li>
  <li>문서를 정의한다.  (grouping)</li>
  <li>문서에 대한 표현을 정의한다. (shingling numbers: 1 and 2)</li>
  <li>Simset을 구동한다. (generating memories)</li>
  <li>문서에 대한 메모리를 만든다.</li>
  <li>만들어진 메모리를 분석한다.</li>
</ol>

<h2 id="inductive-loss-관련">Inductive Loss 관련</h2>

<ol>
  <li>어떤 모델에 대해서 할 것인가? :  GPT 형태, Llama2 형태 사이즈 2개씩 (Pythia)</li>
  <li>어떤 레이어에 대해서 할 것인가? : 15% 간격으로 6개</li>
  <li>얼마나 inductive alpha를 줄 것인가? (0 ~ 0.2 간격으로 6개 + 2.0 5.0)</li>
  <li>메모리 할당 방식은 무엇으로 할 것인가? (random, partitioned, simset1, simset2, simset3)</li>
  <li>문서 개수는 몇 개로 할 것인가? (2, 10, 50, 100, 1000)
    <ul>
      <li>전체 학습 개수 = 2 * 6 * 8 * 4 * 5 = 1920</li>
      <li>연구 파라미터 수 줄이기:
        <ul>
          <li>10% 간격으로 적절한 레이어 찾기 : 그냥 alpha=0.0 실험</li>
        </ul>
      </li>
    </ul>
  </li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">selected_docs</span><span class="o">=</span>1000
<span class="nv">num_clusters</span><span class="o">=</span>1000
<span class="nv">hook_layer</span><span class="o">=</span>24
<span class="nv">lm_size</span><span class="o">=</span>7b
<span class="nv">memory_allocation</span><span class="o">=</span>simset
<span class="nv">mem_seed</span><span class="o">=</span>0
<span class="nv">alpha</span><span class="o">=</span>0.1

<span class="nv">save_dir</span><span class="o">=</span>outputs/trains/lm<span class="s2">"_"</span><span class="nv">$lm_size</span>/layer_<span class="nv">$hook_layer</span>/<span class="nv">$num_clusters</span>/<span class="nv">$memory_allocation</span><span class="s1">'_'</span><span class="nv">$mem_seed</span>/alpha_<span class="nv">$alpha</span>
</code></pre></div></div>

<blockquote>
To find the effective layer for memorizing documents with the proposed structure, we train the model to memorize 1K documents for two models. This training is equivalent to the proposed loss with $\alpha=0.0$. 

To evaluate the proposed method, we train the with different $\alpha$ and memory allocation methods. Currently we report the 1K results. 

For the comparison with the other number of documents, we train with the same layer and change the $alpha$ and memory structure.
</blockquote>

<h2 id="training-params">Training Params</h2>

<ul>
  <li>fixed number of epochs used for Llama2</li>
</ul>

      </d-article>

      <d-appendix>
        <d-footnote-list></d-footnote-list>
        <d-citation-list></d-citation-list>
      </d-appendix>

<!--
    </div>
 -->
      <hr>
<!-- Footer -->    <footer class="sticky-bottom mt-5" style="border: none;border-top:0px">
      <div class="container" style="text-align: center; ">
        © Copyright 2024 Bumjini  . Powered by Jekyll with al-folio theme. Hosted by GitHub Pages.

      </div>
    </footer>
    
    <!-- Bootsrap & MDB scripts -->
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.2/dist/umd/popper.min.js" integrity="sha256-l/1pMF/+J4TThfgARS6KwWrk/egwuVvhRzfLAMQ6Ds4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js" integrity="sha256-SyTu6CwrfOhaznYZPoolVw2rxoY7lKYKQvqbtqN93HI=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script>

    
    

<!-- Scrolling Progress Bar -->
<script type="text/javascript">
  /*
   * This JavaScript code has been adapted from the article 
   * https://css-tricks.com/reading-position-indicator/ authored by Pankaj Parashar, 
   * published on the website https://css-tricks.com on the 7th of May, 2014.
   * Couple of changes were made to the original code to make it compatible 
   * with the `al-foio` theme.
   */
  const progressBar = $("#progress");
  /*
   * We set up the bar after all elements are done loading.
   * In some cases, if the images in the page are larger than the intended
   * size they'll have on the page, they'll be resized via CSS to accomodate
   * the desired size. This mistake, however, breaks the computations as the
   * scroll size is computed as soon as the elements finish loading.
   * To account for this, a minimal delay was introduced before computing the
   * values.
   */
  window.onload = function () {
    setTimeout(progressBarSetup, 50);
  };
  /*
   * We set up the bar according to the browser.
   * If the browser supports the progress element we use that.
   * Otherwise, we resize the bar thru CSS styling
   */
  function progressBarSetup() {
    if ("max" in document.createElement("progress")) {
      initializeProgressElement();
      $(document).on("scroll", function() {
        progressBar.attr({ value: getCurrentScrollPosition() });
      });
      $(window).on("resize", initializeProgressElement);
    } else {
      resizeProgressBar();
      $(document).on("scroll", resizeProgressBar);
      $(window).on("resize", resizeProgressBar);
    }
  }
  /*
   * The vertical scroll position is the same as the number of pixels that
   * are hidden from view above the scrollable area. Thus, a value > 0 is
   * how much the user has scrolled from the top
   */
  function getCurrentScrollPosition() {
    return $(window).scrollTop();
  }

  function initializeProgressElement() {
    let navbarHeight = $("#navbar").outerHeight(true);
    $("body").css({ "padding-top": 0 });
    $("progress-container").css({ "padding-top": 0 });
    progressBar.css({ top: navbarHeight });
    progressBar.attr({
      max: getDistanceToScroll(),
      value: getCurrentScrollPosition(),
    });
  }
  /*
   * The offset between the html document height and the browser viewport
   * height will be greater than zero if vertical scroll is possible.
   * This is the distance the user can scroll
   */
  function getDistanceToScroll() {
    return $(document).height() - $(window).height();
  }

  function resizeProgressBar() {
    progressBar.css({ width: getWidthPercentage() + "%" });
  }
  // The scroll ratio equals the percentage to resize the bar
  function getWidthPercentage() {
    return (getCurrentScrollPosition() / getDistanceToScroll()) * 100;
  }
</script>
  </div></body>
  
  <d-bibliography src="/assets/bibliography/all.bib">
  </d-bibliography>
  <script src="/assets/js/distillpub/overrides.js"></script>

  <center>
    <a  href="">
    <img src="/assets/common/KAIST-hi.gif" width="40px" style="margin-right:0px; padding-bottom: 3px;">
    </a>
  </center>
  <hr> 

  </html>
